@page "/statuses"

@inject NavigationManager Navigation
@using System.Collections.Generic
@using MudBlazor
@using student_management_fe.Models

<MudText Typo="Typo.h4" Class="mb-4" Align="Align.Center" Color="Color.Primary" Style="font-weight: bold;">
    Danh sách các khoa
</MudText>

<MudPaper Class="search-bar" Elevation="3" Style="padding:16px; margin-bottom:20px;">
    <MudGrid>
        <MudItem xs="12" sm="12">
            <MudTextField @bind-Value="searchText"
                          Placeholder="Nhập mã tình trạng hoặc tên tình trạng"
                          Adornment="Adornment.Start"
                          AdornmentIcon="@Icons.Material.Filled.Search"
                          Immediate="true"
                          Variant="MudBlazor.Variant.Outlined"
                          OnKeyDown="HandleKeyPressSearch"
                          Class="w-100" />
        </MudItem>
        <MudItem xs="12" sm="12" Class="d-flex justify-end">
            <MudButton Color="Color.Primary" Variant="MudBlazor.Variant.Filled" StartIcon="@Icons.Material.Filled.Search" OnClick="SearchStudentStatus" Class="me-2">
                Tìm kiếm
            </MudButton>
            <MudButton Color="Color.Success" Variant="MudBlazor.Variant.Filled" StartIcon="@Icons.Material.Filled.Add" OnClick="AddStudentStatus" Class="me-2">
                Thêm mới
            </MudButton>
        </MudItem>
    </MudGrid>
</MudPaper>

<MudPaper Class="table-container" Elevation="4">
    <MudTable Items="studentStatuses" Dense="true" Hover="true" Bordered="true" Striped="true">
        <HeaderContent>
            <MudTh Style="text-align: center">STT</MudTh>
            <MudTh Style="text-align: center">Mã trạng thái</MudTh>
            <MudTh Style="text-align: center">Tên trạng thái</MudTh>
            <MudTh Style="text-align: center">Thao tác</MudTh>
        </HeaderContent>


        <RowTemplate>
            <MudTd Style="text-align: center" DataLabel="STT">@((studentStatuses.IndexOf(context) + 1) + (currentPage - 1) * pageSize)</MudTd>
            <MudTd DataLabel="Mã trạng thái">@context.Id</MudTd>
            <MudTd DataLabel="Tên trạng thái">@context.Name</MudTd>
            <MudTd Style="text-align: center" DataLabel="Thao tác">
                <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Info" OnClick="()=>EditStudentStatus(context)" />
            </MudTd>
        </RowTemplate>

        <NoRecordsContent>
            <MudText>Không tìm thấy dữ liệu...</MudText>
        </NoRecordsContent>
        <LoadingContent>
            <MudText>Đang tải...</MudText>
        </LoadingContent>
    </MudTable>
</MudPaper>

@* <MudGrid Justify="Justify.Center" AlignItems="AlignItems.Center" Class="mt-4 mb-4">
    <MudItem>
        <MudButton Variant="MudBlazor.Variant.Outlined" Color="Color.Default" OnClick="PreviousPage" Disabled="@(currentPage <= 1)" StartIcon="@Icons.Material.Filled.ArrowBack">
            Trước
        </MudButton>
    </MudItem>

    <MudItem>
        <MudText Typo="Typo.subtitle1" Class="mx-2" Style="white-space: nowrap;">
            Trang @(totalPages > 0 ? currentPage : 0) / @totalPages
        </MudText>
    </MudItem>

    <MudItem>
        <MudButton Variant="MudBlazor.Variant.Outlined" Color="Color.Default" OnClick="NextPage" Disabled="@(currentPage >= totalPages)" EndIcon="@Icons.Material.Filled.ArrowForward">
            Sau
        </MudButton>
    </MudItem>
</MudGrid> *@
